<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/persian-datepicker/dist/css/persian-datepicker.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/persian-date/dist/persian-date.min.js"></script>
    <script src="https://unpkg.com/persian-datepicker/dist/js/persian-datepicker.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/style.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <link rel="stylesheet" href="/styles.css">


    <title>Login Page with Passport</title>
</head>

<body class="bg-gray-100 font-sans">

    <!-- Topbar -->
    <header class="fixed top-0 right-0 left-0 h-14 bg-slate-900 text-white flex items-center justify-between px-6 z-50">
        <h1 class="font-bold">مکتب خصوصی نیازی افغان</h1>
        <input type="text" placeholder="جستجو..." class="rounded px-3 py-1 text-black w-64">
        <h1 class="mt-4">Dashboard</h1>
        <p class="lead mb-3">Welcome <%= name %>
        </p>
        <a href="/user/logout" class="btn btn-secondary">Logout</a>
        <a href="/admin" class="btn btn-secondary">Admin</a>

    </header>

    <!-- Sidebar -->
    <aside class="fixed top-14 right-0 w-64 bg-slate-800 text-white min-h-screen p-4 space-y-2">
        <a class="block p-2 rounded hover:bg-slate-700" href="/dashboard">داشبورد</a>
        <!-- Students -->
        <div>
            <button onclick="toggleMenu()"
                class="flex items-center justify-between w-full px-3 py-2 rounded hover:bg-slate-800">
                <span>شاگردان</span>
                <span id="arrow" class="transition-transform">▲</span>
            </button>

            <div id="submenu" class="hidden pr-6 mt-2 space-y-1">
                <a class="block px-3 py-2 rounded hover:bg-slate-800" href="/saveStudent">ثبت شاگرد</a>
                <a class="block px-3 py-2 rounded hover:bg-slate-800" href="#">لیست شاگردان</a>
                <a class="block px-3 py-2 rounded hover:bg-slate-800" href="#">ثبت فیس شاگرد</a>
            </div>
        </div>
        <a class="block p-2 rounded hover:bg-slate-700" href="#">صنوف</a>
        <a class="block p-2 rounded hover:bg-slate-700" href="#">اساتید</a>
        <a class="block p-2 rounded hover:bg-slate-700" href="#">کارمندان</a>
        <a class="block p-2 rounded hover:bg-slate-700" href="#">گدام</a>
        <a class="block p-2 rounded hover:bg-slate-700" href="#">مضامین</a>
        <a class="block p-2 rounded hover:bg-slate-700" href="#">ثبت وسایط</a>
        <a class="block p-2 rounded hover:bg-slate-700" href="#">مدیریت مالی</a>
        <a class="block p-2 rounded hover:bg-slate-700" href="#">مصارف</a>
        <a class="block p-2 rounded hover:bg-slate-700" href="#">گزارشات</a>
        <a class="block p-2 rounded hover:bg-slate-700" href="#">حساب</a>
    </aside>


    <%- body %>
        <!-- JS -->
        <script>
            function toggleMenu() {
                const menu = document.getElementById('submenu');
                const arrow = document.getElementById('arrow');
                menu.classList.toggle('hidden');
                arrow.classList.toggle('rotate-180');
            }
            function resetUploader(wrapperId) {
                const wrapper = document.getElementById(wrapperId);

                wrapper.innerHTML = `
    <input type="file"
      class="file-input block w-full text-sm text-gray-600
             file:py-2 file:px-4
             file:rounded-md file:border-0
             file:bg-blue-600 file:text-white
             hover:file:bg-blue-700
             border rounded-md"/>

    <button type="button"
      onclick="resetUploader('${wrapperId}')"
      class="px-3 py-2 text-sm bg-red-600 text-white rounded-md hover:bg-red-700">
      حذف
    </button>
  `;
            }
            function previewImage(input) {
                const preview = document.getElementById('imagePreview');
                const file = input.files[0];

                if (!file) return;

                if (!file.type.startsWith('image/')) {
                    alert('فقط فایل تصویری مجاز است');
                    input.value = '';
                    return;
                }

                preview.src = URL.createObjectURL(file);
                preview.classList.remove('hidden');
            }

            function removeImage() {
                const input = document.getElementById('imageInput');
                const preview = document.getElementById('imagePreview');

                input.value = '';
                preview.src = '';
                preview.classList.add('hidden');
            }

            // Flash message auto-dismiss after 5 seconds for form validation
            setTimeout(() => {
                const alert = document.querySelector('.flash-success');
                if (alert) alert.remove();
            }, 3000);

            $(document).ready(function () {
                $('#birth_date').persianDatepicker({
                    format: 'YYYY/MM/DD',
                    initialValue: false,
                    autoClose: true,
                    calendar: {
                        persian: {
                            locale: 'fa'
                        }
                    }
                });
            });


        </script>

</body>


</html>